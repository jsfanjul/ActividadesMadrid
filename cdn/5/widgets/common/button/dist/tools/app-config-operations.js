System.register(["jimu-core","jimu-ui"],(function(e,i){var t={},o={};return{setters:[function(e){t.dataSourceUtils=e.dataSourceUtils,t.expressionUtils=e.expressionUtils},function(e){o.utils=e.utils}],execute:function(){e((()=>{var e={79244:e=>{"use strict";e.exports=t},14321:e=>{"use strict";e.exports=o}},i={};function n(t){var o=i[t];if(void 0!==o)return o.exports;var s=i[t]={exports:{}};return e[t](s,s.exports,n),s.exports}n.d=(e,i)=>{for(var t in i)n.o(i,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:i[t]})},n.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="";var s={};return n.p=window.jimuConfig.baseUrl,(()=>{"use strict";n.r(s),n.d(s,{default:()=>t});var e=n(79244),i=n(14321);class t{constructor(){this.id="button-app-config-operation"}useDataSourceWillChange(i,t,o){var n,s;const r=i.widgets[this.widgetId],a=r.config.functionConfig;if(!a||!t||!o)return i;let u;if(e.dataSourceUtils.areDerivedFromSameMain(t,o))u=a.set("textExpression",e.expressionUtils.replaceDataSourceId(a.textExpression,t,o)).set("toolTipExpression",e.expressionUtils.replaceDataSourceId(a.toolTipExpression,t,o)).setIn(["linkParam","expression"],e.expressionUtils.replaceDataSourceId(null===(n=a.linkParam)||void 0===n?void 0:n.expression,t,o));else{r.useDataSources.find((e=>e.dataSourceId===t))&&(u=a.without("textExpression").without("toolTipExpression").set("linkParam",null===(s=a.linkParam)||void 0===s?void 0:s.without("expression")))}if(u){return i.setIn(["widgets",this.widgetId,"config","functionConfig"],u)}return i}afterWidgetCopied(t,o,n,s,r){if(!r)return s;let a=s;const u=o.widgets[t],p=null==u?void 0:u.config,l=p.functionConfig.linkParam,{linkParam:c,isChanged:d}=i.utils.mapLinkParam(r,l);d&&(a=a.setIn(["widgets",n,"config","functionConfig","linkParam"],c));const f=p.functionConfig.textExpression,x=e.expressionUtils.mapExpression(r,f);a=x.isChanged?a.setIn(["widgets",n,"config","functionConfig","textExpression"],x.expression):a;const g=p.functionConfig.toolTipExpression,m=e.expressionUtils.mapExpression(r,g);return a=m.isChanged?a.setIn(["widgets",n,"config","functionConfig","toolTipExpression"],m.expression):a,a}}})(),s})())}}}));